CLASE REPASO

EJ 1

ORG 1000H
CANTM DB 0
TABLA DB 	1, 2, 5, 4, 30
FIN_TABLA DB ?



ORG 3000H  ; Subrutina
RUTINA: 
PUSH AX
PUSH BX
MOV BX, SP
ADD BX, 6
MOV BX, [BX]
MOV AL, [BX]     ;asigno num a AL
MOV AH,0        ;para contar
LOOP:
  ADD AH, AL
  DEC AL
  JNZ LOOP
MOV [BX], AH; en AH se guarda res, en AL queda 0
POP BX
POP AX

RET

ORG 2000H   ; Programa Ppal.
MOV AX, OFFSET TABLA
MOV CL,OFFSET FIN_TABLA-OFFSET TABLA  ;DIMF
MOV CH,0 ; CONTADOR MODIFICADOS
BUCLE:MOV BX,AX
MOV DL,[BX]
CMP DL,20
JS LLAMAR
CONT: INC AX
DEC CL
JNZ BUCLE
JMP FIN

LLAMAR: PUSH AX 
CALL RUTINA
POP AX
INC CH
JMP CONT

FIN: MOV CANTM,CH  ; GUARDAMOS EL CONTADOR EN MEM
HLT
	 	END


EJ2

ORG 1000H
SUMA DB 0
TABLAA DB 	1, 2, 5, 4, 30
TABLAB DB   3, 7, 5, 9, 7



ORG 3000H  ; Subrutina
SUBRUTINA: 
PUSH AX
PUSH BX
PUSH CX
MOV BX, CX
MOV CL, [BX]
MOV AH, 1 ;funciona como res
LOOP: ADD AH,AH ;MULTIPLICO X2
 INC AL
 CMP AL,CL
 JNZ LOOP
 MOV [BX],AH ;guarda en la direccion de NUMB res 
POP CX
POP BX
POP AX

RET

ORG 2000H   ; Programa Ppal.
MOV AX,  OFFSET TABLAA
MOV CX, OFFSET TABLAB
MOV DL, OFFSET TABLAB - OFFSET TABLAA;DIML
MOV DH, 0 ;guarda suma de elementos de tabla b (<10)
BUCLE:PUSH DX
MOV BX, CX 
MOV DL, [BX] ;ELEMENTO TABLA B
MOV BX, AX
MOV DH, [BX] ;ELEM TABLA A
CMP DH,DL
POP DX ;RECUPERAMOS DIM DE TABLA Y LA SUMA DH
JS LLAMAR
CONTINUAR: INC AX
INC CX
DEC DL
JNZ BUCLE  
JMP FIN

LLAMAR:PUSH AX
MOV BX,AX
MOV AL,[BX]
CALL SUBRUTINA
POP AX
MOV BX, CX 
MOV BL, [BX] ;NUMERO DE TABLA B
CMP BL,10
JNS CONTINUAR
ADD DH, BL ; (BL<10) SE SUMA BL EN DH
JMP CONTINUAR

FIN:   MOV SUMA, DH ;ASIGNO RESULTADO FINAL DE SUMA
HLT
	 	END